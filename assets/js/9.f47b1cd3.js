(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{416:function(t,s,a){t.exports=a.p+"assets/img/nginx.3d5f90a1.png"},464:function(t,s,a){"use strict";a.r(s);var n=a(26),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"软件安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#软件安装"}},[t._v("#")]),t._v(" 软件安装")]),t._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#资源查看-huaweicloud"}},[t._v("资源查看(HUAWEICLOUD)")])]),n("li",[n("a",{attrs:{href:"#jdk安装"}},[t._v("JDK安装")])]),n("li",[n("a",{attrs:{href:"#maven安装"}},[t._v("MAVEN安装")])]),n("li",[n("a",{attrs:{href:"#node安装"}},[t._v("NODE安装")])]),n("li",[n("a",{attrs:{href:"#tomcat安装"}},[t._v("TOMCAT安装")])]),n("li",[n("a",{attrs:{href:"#mysql安装"}},[t._v("MYSQL安装")])]),n("li",[n("a",{attrs:{href:"#redis安装"}},[t._v("REDIS安装")])]),n("li",[n("a",{attrs:{href:"#git安装"}},[t._v("GIT安装")])]),n("li",[n("a",{attrs:{href:"#docker安装"}},[t._v("DOCKER安装")])]),n("li",[n("a",{attrs:{href:"#jenkins安装"}},[t._v("JENKINS安装")])]),n("li",[n("a",{attrs:{href:"#nginx安装"}},[t._v("NGINX安装")]),n("ul",[n("li",[n("a",{attrs:{href:"#nginx安装"}},[t._v("Nginx安装")])]),n("li",[n("a",{attrs:{href:"#nginx指令"}},[t._v("Nginx指令")])]),n("li",[n("a",{attrs:{href:"#nginx模块"}},[t._v("Nginx模块")])]),n("li",[n("a",{attrs:{href:"#nginx主配置"}},[t._v("Nginx主配置")])]),n("li",[n("a",{attrs:{href:"#nginx虚拟主机-try-files-配置"}},[t._v("Nginx虚拟主机(try_files)配置")])]),n("li",[n("a",{attrs:{href:"#nginx虚拟主机-proxy-pass-配置"}},[t._v("Nginx虚拟主机(proxy_pass)配置")])])])])])]),n("p"),t._v(" "),n("h2",{attrs:{id:"资源查看-huaweicloud"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#资源查看-huaweicloud"}},[t._v("#")]),t._v(" 资源查看(HUAWEICLOUD)")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://mirrors.huaweicloud.com/java/jdk/",target:"_blank",rel:"noopener noreferrer"}},[t._v("jdk"),n("OutboundLink")],1),t._v(" "),n("a",{attrs:{href:"https://mirrors.huaweicloud.com/apache/maven/maven-3/",target:"_blank",rel:"noopener noreferrer"}},[t._v("maven"),n("OutboundLink")],1),t._v(" "),n("a",{attrs:{href:"https://mirrors.huaweicloud.com/apache/tomcat/",target:"_blank",rel:"noopener noreferrer"}},[t._v("tomcat"),n("OutboundLink")],1),t._v(" "),n("a",{attrs:{href:"https://mirrors.huaweicloud.com/nodejs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("nodejs"),n("OutboundLink")],1),t._v(" "),n("a",{attrs:{href:"https://mirrors.huaweicloud.com/nginx/",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx"),n("OutboundLink")],1),t._v(" "),n("a",{attrs:{href:"https://mirrors.huaweicloud.com/mysql/",target:"_blank",rel:"noopener noreferrer"}},[t._v("mysql"),n("OutboundLink")],1),t._v(" "),n("a",{attrs:{href:"https://mirrors.huaweicloud.com/redis/",target:"_blank",rel:"noopener noreferrer"}},[t._v("redis"),n("OutboundLink")],1),t._v(" "),n("a",{attrs:{href:"https://mirrors.huaweicloud.com/docker-ce/",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker"),n("OutboundLink")],1),t._v(" "),n("a",{attrs:{href:"https://mirrors.huaweicloud.com/jenkins/",target:"_blank",rel:"noopener noreferrer"}},[t._v("jenkins"),n("OutboundLink")],1)]),t._v(" "),n("Badge",{attrs:{text:"Git"}}),t._v(" "),n("Badge",{attrs:{text:"SonarQube"}}),t._v(" "),n("Badge",{attrs:{text:"CheckStyle"}}),t._v(" "),n("h2",{attrs:{id:"jdk安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jdk安装"}},[t._v("#")]),t._v(" JDK安装")]),t._v(" "),n("div",{staticClass:"language-shell script extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p /opt "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /opt\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://mirrors.huaweicloud.com/java/jdk/8u202-b08/jdk-8u202-linux-x64.tar.gz\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p ./jdk1.8.0_202 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf jdk-8u202-linux-x64.tar.gz -C ./jdk1.8.0_202 --strip-components "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/profile\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("JAVA_HOME")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/jdk1.8.0_202\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/bin\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CLASSPATH")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(".:"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/lib/dt.jar:"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/lib/tools.jar\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" /etc/profile\n\njava -version\n")])])]),n("h2",{attrs:{id:"maven安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#maven安装"}},[t._v("#")]),t._v(" MAVEN安装")]),t._v(" "),n("div",{staticClass:"language-shell script extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p /opt "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /opt\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://mirrors.huaweicloud.com/apache/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p ./apache-maven-3.6.3 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf apache-maven-3.6.3-bin.tar.gz -C ./apache-maven-3.6.3 --strip-components "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/profile\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("MAVEN_HOME")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/apache-maven-3.6.3\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$MAVEN_HOME")]),t._v("/bin\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" /etc/profile\n\nmvn -version\n")])])]),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),n("p",[t._v("设置MAVEN镜像：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("   https://developer.aliyun.com/mirror/maven\n   \n   <mirror>\n       <id>aliyunmaven</id>\n       <mirrorOf>*</mirrorOf>\n       <name>阿里云公共仓库</name>\n       <url>https://maven.aliyun.com/repository/public</url>\n   </mirror>\n")])])])]),t._v(" "),n("h2",{attrs:{id:"node安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node安装"}},[t._v("#")]),t._v(" NODE安装")]),t._v(" "),n("div",{staticClass:"language-shell script extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p /opt "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /opt\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://mirrors.huaweicloud.com/nodejs/v10.16.0/node-v10.16.0-linux-x64.tar.gz\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p ./node-v10.16.0 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -xf node-v10.16.0-linux-x64.tar.xz -C ./node-v10.16.0 --strip-components "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/profile\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),t._v(":/opt/node-v10.16.0/bin\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" /etc/profile\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("node")]),t._v(" -v\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" -v\n")])])]),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),n("p",[t._v("1.将npm设置为淘宝镜像：\n"),n("br")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("npm config set registry https://registry.npm.taobao.org\n")])])]),t._v(" "),n("br"),t._v(" "),n("p",[t._v("2.将cnpm设置为淘宝镜像：\n"),n("br")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("cnpm config set registry https://registry.npm.taobao.org\n")])])]),t._v(" "),n("br"),t._v(" "),n("p",[t._v("3.全局安装cnpm：\n"),n("br")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("npm install -g cnpm\n")])])]),t._v(" "),n("br"),t._v(" "),n("p",[t._v("4.查看npm镜像设置：\n"),n("br")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("npm config get registry\n")])])]),t._v(" "),n("br"),t._v(" "),n("p",[t._v("5.查看cnpm镜像设置：\n"),n("br")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("cnpm config get registry \n")])])]),t._v(" "),n("br")]),t._v(" "),n("h2",{attrs:{id:"tomcat安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tomcat安装"}},[t._v("#")]),t._v(" TOMCAT安装")]),t._v(" "),n("h2",{attrs:{id:"mysql安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql安装"}},[t._v("#")]),t._v(" MYSQL安装")]),t._v(" "),n("h2",{attrs:{id:"redis安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis安装"}},[t._v("#")]),t._v(" REDIS安装")]),t._v(" "),n("h2",{attrs:{id:"git安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#git安装"}},[t._v("#")]),t._v(" GIT安装")]),t._v(" "),n("div",{staticClass:"language-shell script extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("yum "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" -y\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" --version\n")])])]),n("h2",{attrs:{id:"docker安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker安装"}},[t._v("#")]),t._v(" DOCKER安装")]),t._v(" "),n("h2",{attrs:{id:"jenkins安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jenkins安装"}},[t._v("#")]),t._v(" JENKINS安装")]),t._v(" "),n("div",{staticClass:"language-shell script extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("    \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#!bin/bash")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("oldPid")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("pgrep -f "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"java.*'),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${1}")]),t._v('"')]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" -n "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${oldPid}")]),t._v('"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"正在杀死该服务原有进程,进程ID为:'),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${oldPid}")]),t._v('"')]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("kill")]),t._v(" -9 "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${oldPid}")]),t._v('"')]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"该服务原有进程已杀死"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" /etc/profile\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 指令暂停一秒")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),t._v(" 1s\n    \n    "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /data/app/\n    \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 最小/最大堆大小")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("nohup")]),t._v(" java -Xms500m -Xmx1024m  -jar "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v('"')]),t._v(".jar "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("./logs/"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v('"')]),t._v(".out "),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("&1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 指令暂停三秒")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),t._v(" 3s\n    \n    "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("newPid")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("pgrep -f "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"java.*'),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${1}")]),t._v('"')]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" -n "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${newPid}")]),t._v('"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"该服务新的进程ID为:'),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${newPid}")]),t._v('"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"该服务启动成功"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"该服务新的进程ID为空"')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"该服务启动失败"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" -n "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${newPid}")]),t._v('"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\n      _____ _    _  _____ _____ ______  _____ _____ \n     / ____| |  | |/ ____/ ____|  ____|/ ____/ ____|\n    | (___ | |  | | |   | |    | |__  | (___| (___  \n     \\___ \\| |  | | |   | |    |  __|  \\___ '),n("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[t._v("\\\\")]),t._v('___ \\ \n     ____) | |__| | |___| |____| |____ ____) |___) |\n    |_____/ \\____/ \\_____\\_____|______|_____/_____/ \n    "')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('" \n      ______     ______ _     _    _ _____  ______ \n     |  ____/\\   |_   _| |   | |  | |  __ \\|  ____|\n     | |__ /  \\    | | | |   | |  | | |__) | |__   \n     |  __/ /\\ \\   | | | |   | |  | |  _  /|  __|  \n     | | / ____ \\ _| |_| |___| |__| | | \\ \\| |____ \n     |_|/_/    \\_|_____|______\\____/|_|  \\_|______|\n    "')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n\n")])])]),n("h2",{attrs:{id:"nginx安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx安装"}},[t._v("#")]),t._v(" NGINX安装")]),t._v(" "),n("h3",{attrs:{id:"nginx安装-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx安装-2"}},[t._v("#")]),t._v(" Nginx安装")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("二进制编译安装，下面是把最新稳定版 Nginx 安装到 /usr/local/nginx 目录下的详细步骤：\n")])])]),n("p",[n("img",{attrs:{src:a(416),alt:"Image"}})]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("\n yum "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y net-tools\n yum "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v("\n yum "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v("\n yum "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v("\n yum "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y gcc-c++ zlib zlib-devel openssl openssl-devel pcre pcre-devel\n\n")])])]),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("\n "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" ~\n "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" http://nginx.org/download/nginx-1.20.2.tar.gz\n "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf nginx-1.20.2.tar.gz\n "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" nginx-1.20.2/\n\n")])])]),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("\n ./configure --prefix"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/nginx "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n --with-http_ssl_module "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n --with-http_gzip_static_module\n \n "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n\n")])])]),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("\n "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/profile\n "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[n("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/nginx/sbin:"),n("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" /etc/profile\n \n")])])]),n("h3",{attrs:{id:"nginx指令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx指令"}},[t._v("#")]),t._v(" Nginx指令")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v(" nginx -t\n nginx\n nginx -s reload\n "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("pkill")]),t._v(" nginx\n nginx -V\n nginx -v\n")])])]),n("h3",{attrs:{id:"nginx模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx模块"}},[t._v("#")]),t._v(" Nginx模块")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("\n ./configure --prefix"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/nginx "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n --with-http_ssl_module "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n --with-http_gzip_static_module "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n --with-http_stub_status_module "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n --with-http_realip_module\n \n "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v("\n\n")])])]),n("h3",{attrs:{id:"nginx主配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx主配置"}},[t._v("#")]),t._v(" Nginx主配置")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#user  nobody;")]),t._v("\nuser  root"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nworker_processes  auto"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nworker_rlimit_nofile "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("65535")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nerror_log  logs/error.log  notice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nerror_log  logs/error.log  info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\npid        logs/nginx.pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nevents "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    worker_connections  "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("65535")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nhttp "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    include       mime.types"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    default_type  application/octet-stream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    log_format  main  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$remote_addr - $remote_user [$time_local] \"$request\" '")]),t._v("\n                      "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$status $body_bytes_sent \"$http_referer\" '")]),t._v("\n                      "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'"$http_user_agent" "$http_x_forwarded_for"\'')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    access_log  logs/access.log  main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    sendfile        on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#tcp_nopush     on;")]),t._v("\n\n    client_max_body_size 4096M"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    keepalive_timeout  "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("65")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    fastcgi_buffer_size 64k"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    fastcgi_buffers "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" 64k"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    fastcgi_busy_buffers_size 128k"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    fastcgi_temp_file_write_size 256k"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    fastcgi_connect_timeout "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    fastcgi_send_timeout "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    fastcgi_read_timeout "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    proxy_connect_timeout 300s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    proxy_send_timeout 300s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    proxy_read_timeout 300s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n    client_header_buffer_size 1024k"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    large_client_header_buffers "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" 1024k"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开启gzip")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("gzip")]),t._v(" on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    gzip_min_length  5k"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进行压缩的文件类型。")]),t._v("\n    gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 是否在http header中添加Vary: Accept-Encoding，建议开启")]),t._v("\n    gzip_vary on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    include conf.d/*.conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),n("h3",{attrs:{id:"nginx虚拟主机-try-files-配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx虚拟主机-try-files-配置"}},[t._v("#")]),t._v(" Nginx虚拟主机(try_files)配置")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("\nserver "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    listen       "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    server_name  www.shannn.cn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    access_log /data/nginx/logs/www.oos.zone_access.log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    error_log /data/nginx/logs/www.oos.zone_error.log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#添加如下内容即可防止爬虫")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$http_user_agent")]),t._v(" ~* "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"qihoobot|Baiduspider|Googlebot|Googlebot-Mobile|Googlebot-Image|Mediapartners-Google|Adsbot-Google|Feedfetcher-Google|Yahoo! Slurp|Yahoo! Slurp China|YoudaoBot|Sosospider|Sogou spider|Sogou web spider|MSNBot|ia_archiver|Tomato Bot"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("403")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#### 新增规则【开始】 ####")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#初始化变量为空")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$deny_spider")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#如果请求地址中含有需要禁止抓取关键词时，将变量设置为y：")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request_uri")]),t._v("  ~* "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\?replytocom=(\\d+)|\\?p=(\\d+)|/feed|/date|/wp-admin|comment-page-(\\d+)|/go"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$deny_spider")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'y'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#如果抓取的UA中含有spider或bot时，继续为变量赋值（通过累加赋值间接实现nginx的多重条件判断）")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$http_user_agent")]),t._v(" ~* "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"spider|bot"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$deny_spider")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${deny_spider}")]),t._v('es"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#当满足以上2个条件时，则返回404，符合搜索引擎死链标准")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$deny_spider")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'yes'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("403")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#如果是删除已收录的，则可以返回404")]),t._v("\n         "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 客户端用不缓存html配置")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$no_cache_html_params")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"private, no-store, no-cache, must-revalidate, proxy-revalidate"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 客户端根目录")]),t._v("\n    root /data/www/oos.zone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# www.oos.zone")]),t._v("\n    location / "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        index index.html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        try_files "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$uri")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$uri")]),t._v("/ /index.html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),n("h3",{attrs:{id:"nginx虚拟主机-proxy-pass-配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx虚拟主机-proxy-pass-配置"}},[t._v("#")]),t._v(" Nginx虚拟主机(proxy_pass)配置")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("\nserver "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n   listen       "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   listen  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("::"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":80"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   server_name  localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 收银台")]),t._v("\n   location /cashier "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      proxy_pass http://cashier-web-svc:80"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 优惠券")]),t._v("\n   location /coupon "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      proxy_pass http://coupon-web-svc:80"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 微信公众号通用授权")]),t._v("\n   location ~ MP_verify_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(".*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".txt "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])])],1)}),[],!1,null,null,null);s.default=e.exports}}]);